## all

Ğ’Ğ¾ Ğ²ÑĞµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°Ñ… Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ (Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‰Ğ¸Ñ… Ğ¿Ñ€Ğ¾Ğ¼Ğ¸Ñ) Ğ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¼Ğ¸Ñ Ñ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ¾Ğ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ²ÑĞµÑ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹. ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ² Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼Ğ¾Ğ¼ Ğ¼Ğ°ÑĞ¸Ğ²Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ñ€ÑĞ´ĞºÑƒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹.

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:

```js
const f = (value, ms = Math.random() * 1000 + 500) => new Promise((resolve) => {
  setTimeout(() => resolve(value), ms);
});

const apple = x => f("ğŸ");
const grape = x => f("ğŸ‡");
const mango = x => f("ğŸ¥­");
  
solve([apple, grape, mango]).then(console.log) // ["ğŸ", "ğŸ‡", "ğŸ¥­"]

// Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Promise.all Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµĞ»Ğ° Ğ±Ñ‹ Ñ‚Ğ°Ğº:

function solve(fns) {
  return Promise.all(fns.map(fn => fn()));
}
```

1. ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ allSequentially, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾.
2. ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ allParallel, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾.
2. ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ allLimited, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ½Ğµ Ğ±Ğ¾Ğ»ĞµĞµ N Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾.

# withRetry
  
Ğ”Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼, Ñƒ Ğ½Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¸Ğ½Ğ¾Ğ³Ğ´Ğ° Ñ€ĞµĞ´Ğ¶ĞµĞºÑ‚Ğ¸Ñ‚ÑÑ, Ğ° Ğ¸Ğ½Ğ¾Ğ³Ğ´Ğ° Ñ€ĞµĞ·Ğ¾Ğ»Ğ²Ğ¸Ñ‚ÑÑ Ñ ĞºĞ°ĞºĞ¾Ğ¹-Ñ‚Ğ¾ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒÑ.
  
```js
function sum(a, b) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (Math.random() < 0.3) {
        resolve(a + b);
      } else {
        reject('err');
      }
    }, 500);
  });
}
```
 
Ğ•ÑĞ»Ğ¸ ĞµĞµ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ 10_000 Ñ€Ğ°Ğ·, Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ 3_000 Ğ±ÑƒĞ´ÑƒÑ‚ ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¼Ğ¸, Ğ° 7_000 Ğ½ĞµÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¼Ğ¸.

Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„ÑƒĞ½Ñ†Ğ¸Ñ-Ğ´ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€ `withRetry(fn, n)`, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ°ÑĞ¸Ñ…Ñ€Ğ¾Ğ½Ğ½ÑƒÑ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑ‚ÑĞ²Ğ¾ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚, Ğ° Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²ÑƒÑ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº ÑÑ‚Ğ°Ñ€Ğ°Ñ, Ğ½Ğ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ½Ğµ Ğ±Ğ¾Ğ»ĞµĞµ N Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚. Ğ•ÑĞ»Ğ¸ Ğ´Ğ°Ğ¶Ğµ Ğ·Ğ° N Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¾ÑÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚, Ñ‚Ğ¾ Ğ¾Ğ½Ğ° Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ñ€ĞµĞ´Ğ¶ĞµĞºÑ‚ Ğ¸Ğ· Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸. 
                     
```js
  const sumWithRetry = withRetry(sum, 4);
                              
  sumWithRetry(3, 2).then(console.log, console.log); // 5 Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒÑ 76% Ğ¸ 'err' Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒÑ 24%
```                
                              
Ğ•ÑĞ»Ğ¸ ĞµĞµ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ 10_000 Ñ€Ğ°Ğ·, Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ 7_600 Ğ±ÑƒĞ´ÑƒÑ‚ ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¼Ğ¸, Ğ° 2_400 Ğ½ĞµÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¼Ğ¸.
