## all

Ð’Ð¾ Ð²ÑÐµ Ð·Ð°Ð´Ð°Ñ‡Ð°Ñ… Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¼Ð°ÑÑÐ¸Ð² Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ (Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‰Ð¸Ñ… Ð¿Ñ€Ð¾Ð¼Ð¸Ñ) Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ Ñ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ð²ÑÐµÑ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹. ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ð² Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼Ð¾Ð¼ Ð¼Ð°ÑÐ¸Ð²Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹.

ÐŸÑ€Ð¸Ð¼ÐµÑ€:

```js
const f = (value, ms = Math.random() * 1000 + 500) => new Promise((resolve) => {
  setTimeout(() => resolve(value), ms);
});

const apple = x => f("ðŸŽ");
const grape = x => f("ðŸ‡");
const mango = x => f("ðŸ¥­");
  
solve([apple, grape, mango]).then(console.log) // ["ðŸŽ", "ðŸ‡", "ðŸ¥­"]

// Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Promise.all Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÐ»Ð° Ð±Ñ‹ Ñ‚Ð°Ðº:

function solve(fns) {
  return Promise.all(fns.map(fn => fn()));
}
```

1. ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ allSequentially, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾.
2. ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ allParallel, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾.
2. ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ allLimited, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð½Ðµ Ð±Ð¾Ð»ÐµÐµ N Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾.

## withRetry
  
Ð”Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼, Ñƒ Ð½Ð°Ñ ÐµÑÑ‚ÑŒ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¸Ð½Ð¾Ð³Ð´Ð° Ñ€ÐµÐ´Ð¶ÐµÐºÑ‚Ð¸Ñ‚ÑÑ, Ð° Ð¸Ð½Ð¾Ð³Ð´Ð° Ñ€ÐµÐ·Ð¾Ð»Ð²Ð¸Ñ‚ÑÑ Ñ ÐºÐ°ÐºÐ¾Ð¹-Ñ‚Ð¾ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒÑŽ.
  
```js
function sum(a, b) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (Math.random() < 0.3) {
        resolve(a + b);
      } else {
        reject('err');
      }
    }, 500);
  });
}
```
 
Ð•ÑÐ»Ð¸ ÐµÐµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ 10_000 Ñ€Ð°Ð·, Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ 3_000 Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¼Ð¸, Ð° 7_000 Ð½ÐµÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¼Ð¸.

Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½Ñ†Ð¸ÑŽ-Ð´ÐµÐºÐ¾Ñ€Ð°Ñ‚Ð¾Ñ€ `withRetry(fn, n)`, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð°ÑÐ¸Ñ…Ñ€Ð¾Ð½Ð½ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð¸ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑ‚ÑÐ²Ð¾ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚, Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð½Ð¾Ð²ÑƒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ°Ðº ÑÑ‚Ð°Ñ€Ð°Ñ, Ð½Ð¾ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð´ÐµÐ»Ð°ÐµÑ‚ Ð½Ðµ Ð±Ð¾Ð»ÐµÐµ N Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚. Ð•ÑÐ»Ð¸ Ð´Ð°Ð¶Ðµ Ð·Ð° N Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚, Ñ‚Ð¾ Ð¾Ð½Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ€ÐµÐ´Ð¶ÐµÐºÑ‚ Ð¸Ð· Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ¸. 
                     
```js
  const sumWithRetry = withRetry(sum, 4);
                              
  sumWithRetry(3, 2).then(console.log, console.log); // 5 Ñ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒÑŽ 76% Ð¸ 'err' Ñ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒÑŽ 24%
```                
                              
Ð•ÑÐ»Ð¸ ÐµÐµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ 10_000 Ñ€Ð°Ð·, Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ 7_600 Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¼Ð¸, Ð° 2_400 Ð½ÐµÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¼Ð¸.

## promisify

## folder

Ð¢Ñ€Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸: callback / promises / async-await

##  polyfills

- Promise.all()
- Promise.allSettled()
- Promise.any()
- Promise.race()
- Promise.reject()
- Promise.resolve()
- Promise.prototype.catch()

## delay

```js
const plus1 = x => new Promise(r => setTimeout(r, 1000, x + 1))
const plus2 = x => new Promise(r => setTimeout(r, 2000, x + 2))
const plus3 = x => new Promise(r => setTimeout(r, 3000, x + 3))
const plus4 = x => new Promise(r => setTimeout(r, 4000, x + 4))
const plus5 = x => new Promise(r => setTimeout(r, 5000, x + 5))

Promise.resolve(0)
  .then(plus1)
  .then(plus2)
  .then(plus3)
  .then(plus4)
  .then(plus5)
  .then(console.log) // Ñ‡Ð¸ÑÐ»Ð¾ 15 Ñ‡ÐµÑ€ÐµÐ· 15 ÑÐµÐºÑƒÐ½Ð´
```

ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ delay:

```js
Promise.resolve(0)
  .then(plus1)
  .then(plus2)
  .then(plus3)
  .then(delay(7000))
  .then(plus4)
  .then(plus5)
  .then(console.log) // Ñ‡Ð¸ÑÐ»Ð¾ 15 Ñ‡ÐµÑ€ÐµÐ· 22 ÑÐµÐºÑƒÐ½Ð´
```

## async pipeline

```js
const mult3 = x => f(x * 3, 500);
const devide5 = x => f(x / 5, 1500);
const square = x => f(x ** 2, 2000);

doAsyncPipeline([mult3, devide5, square], 10).then(x => {
   console.log(x); // 36
});

```
